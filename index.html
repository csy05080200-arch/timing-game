<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í´ë¦­ íƒ€ì´ë° ê²Œì„</title>

  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    #container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #game {
      width: 400px;
      height: 40px;
      border: 2px solid #333;
      position: relative;
      cursor: pointer;
    }

    #target {
      position: absolute;
      left: 160px;
      width: 80px;
      height: 100%;
      background: rgba(110, 231, 183, 0.4);
      pointer-events: none;
    }

    #bar {
      position: absolute;
      width: 10px;
      height: 100%;
      background: #111;
      left: 0;
    }

    #score {
      margin-top: 20px;
      font-size: 18px;
    }

    #rule {
      margin-top: 8px;
      font-size: 13px;
      color: #555;
    }

    #highScore {
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: bold;
    }


    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.15s;
    }
    @keyframes megaSparkle {
  0% {
    transform: scale(1);
    color: #000;
    text-shadow: none;
  }
  30% {
    transform: scale(1.4) rotate(-5deg);
    color: #f59e0b;
    text-shadow: 0 0 12px gold, 0 0 24px gold;
  }
  60% {
    transform: scale(1.4) rotate(5deg);
    color: #facc15;
    text-shadow: 0 0 18px gold, 0 0 30px gold;
  }
  100% {
    transform: scale(1);
    color: #000;
    text-shadow: none;
  }
}

.mega-sparkle {
  animation: megaSparkle 0.8s ease-in-out;
}
  .firework {
  position: fixed;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  pointer-events: none;
  animation: firework 1s ease-out forwards;
}

@keyframes firework {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x), var(--y)) scale(0.3);
    opacity: 0;
  }
}
@keyframes scoreDamage {
  0% {
    transform: scale(1);
    color: #000;
  }
  30% {
    transform: scale(1.3);
    color: #ef4444; /* ë¹¨ê°„ìƒ‰ */
  }
  60% {
    transform: scale(1.3);
    color: #ef4444;
  }
  100% {
    transform: scale(1);
    color: #000;
  }
}
/* ğŸ”´ ì ìˆ˜ ê°ì†Œ íŒŒí¸ */
.damage-particle {
  position: fixed;
  width: 6px;
  height: 6px;
  background: #ef4444;
  border-radius: 50%;
  pointer-events: none;
  animation: damageParticle 0.6s ease-out forwards;
}

@keyframes damageParticle {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--x), var(--y)) scale(0.2);
    opacity: 0;
  }
}
.score-damage {
  animation: scoreDamage 0.4s ease;
}
  </style>
</head>

<body>
  <div id="container">

    <div id="highScore">ğŸ‘‘ ìµœê³ ì ìˆ˜: 0</div>

    <div id="game">
      <div id="target"></div>
      <div id="bar"></div>
    </div>

    <div id="score">ì ìˆ˜: 0</div>
<p id="rule">â€» ê²€ì •ìƒ‰ ë°”ê°€ ì™¼ìª½ ëì— ë‹¿ìœ¼ë©´ ì ìˆ˜ê°€ 1ì  ê°ì†Œí•©ë‹ˆë‹¤.</p>

  </div>
  <script>
document.addEventListener("DOMContentLoaded", () => {

  const bar = document.getElementById("bar");
  const game = document.getElementById("game");
  const scoreText = document.getElementById("score");
  const target = document.getElementById("target");
  const highScoreText = document.getElementById("highScore");

  /* ===== ìµœê³  ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° ===== */
  let highScore = localStorage.getItem("highScore")
    ? Number(localStorage.getItem("highScore"))
    : 0;

  highScoreText.textContent = "ğŸ‘‘ ìµœê³ ì ìˆ˜: " + highScore;

  /* ===== ì„±ê³µ ì‚¬ìš´ë“œ ===== */
  function playSuccessSound() {
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "triangle";   // ğŸ”” ëµ ì†Œë¦¬
    osc.frequency.value = 660;

    gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.35);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.35);
  }

  /* ===== ì ìˆ˜ ê°ì†Œ íŒŒí¸ ===== */
  function launchDamageParticles() {
    const rect = scoreText.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    for (let i = 0; i < 18; i++) {
      const p = document.createElement("div");
      p.className = "damage-particle";

      const angle = Math.random() * Math.PI * 2;
      const distance = Math.random() * 80 + 30;

      p.style.left = centerX + "px";
      p.style.top = centerY + "px";
      p.style.setProperty("--x", Math.cos(angle) * distance + "px");
      p.style.setProperty("--y", Math.sin(angle) * distance + "px");

      document.body.appendChild(p);
      setTimeout(() => p.remove(), 600);
    }
  }

  /* ===== ë°” ì´ë™ ===== */
  let position = 0;
  let speed = 2;
  let direction = 1;
  let score = 0;
  let reachedRight = false;

  function moveBar() {
    position += speed * direction;

    if (position >= 390) {
      direction = -1;
      reachedRight = true;
    }

    if (position <= 0) {
      direction = 1;

      if (reachedRight) {
        score = Math.max(0, score - 1);
        scoreText.textContent = "ì ìˆ˜: " + score;

        // ğŸ”´ ì ìˆ˜ ê°•ì¡° + íŒŒí¸
        scoreText.classList.add("score-damage");
        setTimeout(() => {
          scoreText.classList.remove("score-damage");
        }, 400);

        launchDamageParticles();
        reachedRight = false;
      }
    }

    bar.style.left = position + "px";
    requestAnimationFrame(moveBar);
  }

  /* ===== ì„±ê³µ / ì‹¤íŒ¨ íŒì • ===== */
  function checkHit() {
    const targetLeft = target.offsetLeft;
    const targetRight = targetLeft + target.offsetWidth;

    if (position >= targetLeft && position <= targetRight) {
      score++;
      speed += 0.5;
      scoreText.textContent = "ì ìˆ˜: " + score;

      playSuccessSound();

      target.style.left = Math.random() * (400 - 80) + "px";

      if (navigator.vibrate) navigator.vibrate(80);

      game.classList.add("shake");
      setTimeout(() => game.classList.remove("shake"), 150);

    } else {
      // ìµœê³ ì ìˆ˜ ê°±ì‹ 
      if (score > highScore) {
        highScore = score;
        localStorage.setItem("highScore", highScore);
        highScoreText.textContent = "ğŸ‘‘ ìµœê³ ì ìˆ˜: " + highScore;
      }

      alert("ê²Œì„ ì¢…ë£Œ!\nì ìˆ˜: " + score);
      location.reload();
    }
  }

  /* ===== ì…ë ¥ ===== */
  document.addEventListener("click", checkHit);

  document.addEventListener("keydown", (e) => {
    if (e.code === "Space") {
      e.preventDefault();
      checkHit();
    }
  });

  moveBar();
});
</script>
</body>
</html>
