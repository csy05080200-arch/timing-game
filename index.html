<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í´ë¦­ íƒ€ì´ë° ê²Œì„</title>

  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    #container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #game {
      width: 400px;
      height: 40px;
      border: 2px solid #333;
      position: relative;
      cursor: pointer;
    }

    #target {
      position: absolute;
      left: 160px;
      width: 80px;
      height: 100%;
      background: rgba(110, 231, 183, 0.4);
      pointer-events: none;
    }

    #bar {
      position: absolute;
      width: 10px;
      height: 100%;
      background: #111;
      left: 0;
    }

    #score {
      margin-top: 20px;
      font-size: 18px;
    }

    #rule {
      margin-top: 8px;
      font-size: 13px;
      color: #555;
    }

    #highScore {
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: bold;
    }


    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.15s;
    }
  </style>
</head>

<body>
  <div id="container">

    <div id="highScore">ğŸ‘‘ ìµœê³ ì ìˆ˜: 0</div>

    <div id="game">
      <div id="target"></div>
      <div id="bar"></div>
    </div>

    <div id="score">ì ìˆ˜: 0</div>
<p id="rule">â€» ê²€ì •ìƒ‰ ë°”ê°€ ì™¼ìª½ ëì— ë‹¿ìœ¼ë©´ ì ìˆ˜ê°€ 1ì  ê°ì†Œí•©ë‹ˆë‹¤.</p>

  </div>
  <script>
document.addEventListener("DOMContentLoaded", () => {

  const bar = document.getElementById("bar");
  const game = document.getElementById("game");
  const scoreText = document.getElementById("score");
  const target = document.getElementById("target");
  const highScoreText = document.getElementById("highScore");

  // ì €ì¥ëœ ìµœê³ ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
  let highScore = localStorage.getItem("highScore")
    ? Number(localStorage.getItem("highScore"))
    : 0;

  highScoreText.textContent = "ğŸ‘‘ ìµœê³ ì ìˆ˜: " + highScore;



  function playSuccessSound() {
  const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  const oscillator = audioCtx.createOscillator();
  const gainNode = audioCtx.createGain();

  oscillator.type = "triangle";   // ğŸ”” ëµ ëŠë‚Œ í•µì‹¬
  oscillator.frequency.value = 660; // ë„ˆë¬´ ë†’ì§€ ì•Šê²Œ

  gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(
    0.001,
    audioCtx.currentTime + 0.35   // ì—¬ìš´
  );

  oscillator.connect(gainNode);
  gainNode.connect(audioCtx.destination);

  oscillator.start();
  oscillator.stop(audioCtx.currentTime + 0.35);
}


  let position = 0;
  let speed = 2;
  let direction = 1;
  let score = 0;

  let reachedRight = false;

  function moveBar() {
    position += speed * direction;

    if (position >= 390) {
      direction = -1;
      reachedRight = true;
    }

    if (position <= 0) {
      direction = 1;

      if (reachedRight) {
        score = Math.max(0, score - 1);
        scoreText.textContent = "ì ìˆ˜: " + score;
        reachedRight = false;
      }
    }

    bar.style.left = position + "px";
    requestAnimationFrame(moveBar);
  }

  document.addEventListener("click", () => {
    const targetLeft = target.offsetLeft;
    const targetRight = targetLeft + target.offsetWidth;

    if (position >= targetLeft && position <= targetRight) {
      score++;
      speed += 0.5;
      scoreText.textContent = "ì ìˆ˜: " + score;

      playSuccessSound(); // ğŸ”Š ì„±ê³µ ì†Œë¦¬

      const maxPosition = 400 - 80;
      target.style.left = Math.random() * maxPosition + "px";

      if (navigator.vibrate) {
        navigator.vibrate(80);
      }

      game.classList.add("shake");
      setTimeout(() => game.classList.remove("shake"), 150);

    } else {

  if (score > highScore) {
    highScore = score;
    localStorage.setItem("highScore", highScore);
    highScoreText.textContent = "ğŸ‘‘ ìµœê³ ì ìˆ˜: " + highScore;
  }

  alert("ê²Œì„ ì¢…ë£Œ!\nì ìˆ˜: " + score);
  location.reload();
}

  });

  moveBar();
});
</script>
</body>
</html>
